@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;800&display=swap');

:root {
  --bg: #0b0f17;
  --fg: #e8eef7;
  --accent: #4fc3f7;
  --accent-2: #ffd166;
  --danger: #ef476f;
  --success: #06d6a0;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Noto Sans Bengali', system-ui, -apple-system, Segoe UI, Roboto, Arial, 'Helvetica Neue', sans-serif;
  color: var(--fg);
  background: radial-gradient(1200px 800px at 70% 20%, #162232 0%, #0b0f17 50%, #06080c 100%);
}

/* Cinematic letterbox */
.cinematic-frame::before,
.cinematic-frame::after {
  content: '';
  position: fixed;
  left: 0; right: 0;
  height: 64px;
  background: rgba(0,0,0,0.85);
  z-index: 100;
  pointer-events: none;
}
.cinematic-frame::before { top: 0; }
.cinematic-frame::after { bottom: 0; }

/* Film grain */
.grain {
  position: fixed; inset: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
  z-index: 50;
}

/* Scene container */
.scene {
  min-height: 100vh;
  display: grid;
  place-items: center;
  position: relative;
  overflow: hidden;
}

/* Balcony setting */
.balcony {
  position: relative;
  width: min(900px, 92vw);
  aspect-ratio: 16 / 9;
  border-radius: 18px;
  background: linear-gradient(180deg, rgba(19,28,43,0.9) 0%, rgba(12,18,28,0.9) 100%);
  box-shadow: 0 20px 60px rgba(0,0,0,0.45), inset 0 0 0 1px rgba(255,255,255,0.05);
  overflow: hidden;
}

/* Background city */
.city {
  position: absolute; inset: 0;
  background: linear-gradient(180deg, #0b1630 0%, #0a1222 60%, #0a101a 100%);
}
.city .building {
  position: absolute; bottom: 0;
  width: 14%; height: 38%;
  background: linear-gradient(180deg, #1a2740, #0f1b32);
  border-radius: 4px 4px 0 0;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);
  filter: blur(0.3px);
}
.city .light { position: absolute; width: 4px; height: 8px; background: #ffd166; border-radius: 1px; opacity: 0.65; }

/* Balcony rail */
.rail { position: absolute; bottom: 18%; left: 0; right: 0; height: 8px; background: rgba(255,255,255,0.08); box-shadow: 0 2px 0 rgba(255,255,255,0.06) inset; }
.rail::after { content: ''; position: absolute; inset: auto 0 -14px 0; height: 14px; background: linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.35)); }

/* Ground */
.ground { position: absolute; bottom: 0; left: 0; right: 0; height: 18%; background: linear-gradient(180deg, rgba(20,26,36,1) 0%, rgba(12,16,22,1) 100%); }

/* Characters (emoji-driven with cinematic styling) */
.actor {
  position: absolute;
  font-size: clamp(36px, 7vmin, 72px);
  filter: drop-shadow(0 8px 16px rgba(0,0,0,0.45));
  transform: translate(-50%, -50%);
  transition: transform 800ms ease, opacity 800ms ease, filter 800ms ease;
}
.actor .label {
  margin-top: 8px;
  font-size: 14px;
  text-align: center;
  opacity: 0.7;
}

/* Overlays */
.vignette { position: absolute; inset: 0; pointer-events: none; background: radial-gradient(80% 60% at 50% 50%, transparent 30%, rgba(0,0,0,0.25) 100%); }
.grade { position: absolute; inset: 0; pointer-events: none; background: linear-gradient(0deg, rgba(0,0,0,0.2), rgba(79,195,247,0.06)); mix-blend-mode: color; }

/* Sun */
.sun { position: absolute; top: 10%; left: 75%; width: 120px; height: 120px; background: radial-gradient(circle at 30% 30%, #fff6cc, #ffd166 60%, rgba(255,209,102,0) 70%); filter: blur(0.6px) drop-shadow(0 0 24px rgba(255,209,102,0.4)); border-radius: 50%; opacity: 0.9; }

/* Text captions */
.caption {
  position: absolute; bottom: 24px; left: 50%; transform: translateX(-50%);
  background: rgba(0,0,0,0.45);
  padding: 10px 14px; border-radius: 10px; backdrop-filter: blur(6px);
  font-weight: 600; letter-spacing: 0.2px; max-width: 86%; text-align: center;
}

/* Animations */
@keyframes flyAcross { 0% { transform: translate(-10vw,-30vh) rotate(-5deg); } 100% { transform: translate(110vw,-10vh) rotate(5deg); } }
@keyframes pounce { 0% { transform: translate(-50%, -50%) scale(0.95); } 50% { transform: translate(-50%, -56%) scale(1.05); } 100% { transform: translate(-50%, -50%) scale(1); } }
@keyframes breathe { 0% { transform: translate(-50%, -50%) scale(0.98); } 50% { transform: translate(-50%, -50%) scale(1.02); } 100% { transform: translate(-50%, -50%) scale(0.98); } }

.child { left: 30%; top: 68%; animation: breathe 4s ease-in-out infinite; }
.hawk  { left: -10%; top: 22%; }
.cat   { left: 18%; top: 70%; }
.mom   { right: -20%; top: 66%; }

/* Step-based state classes applied from React */
.step-0 .hawk { opacity: 0; }
.step-1 .hawk { opacity: 1; transform: translate(36vw, 20vh) rotate(-6deg); transition: transform 900ms cubic-bezier(0.2, 0.8, 0.2, 1); }
.step-2 .cat  { transform: translate(-50%, -50%) scale(1.05) rotate(-6deg); filter: drop-shadow(0 16px 24px rgba(0,0,0,0.55)); animation: pounce 600ms ease-out; }
.step-2 .hawk { transform: translate(50vw, -6vh) rotate(10deg); filter: blur(0.4px) drop-shadow(0 16px 28px rgba(0,0,0,0.6)); }
.step-3 .hawk { transform: translate(110vw, -20vh) rotate(12deg); opacity: 0; }
.step-3 .cat  { transform: translate(-50%, -50%) scale(1); }
.step-4 .mom  { transform: translate(-50%, -50%) translateX(-18vw); }
.step-5 .mom  { transform: translate(-50%, -50%) translateX(-28vw); }
.step-5 .child{ transform: translate(-50%, -50%) translateX(6vw) scale(0.96); }

/* Button */
.controls { position: absolute; top: 16px; right: 16px; display: flex; gap: 8px; z-index: 120; }
.btn { background: rgba(255,255,255,0.08); color: var(--fg); border: 1px solid rgba(255,255,255,0.12); padding: 8px 12px; border-radius: 10px; cursor: pointer; transition: all .2s ease; }
.btn:hover { background: rgba(255,255,255,0.14); border-color: rgba(255,255,255,0.22); }
